<!DOCTYPE html>
<html>
<font face = "helvetica,arial">

<!-- CSS and Icon Include -->
<head>
<link rel="stylesheet" type="text/css" href="twitch-visualizer.css">
 <link rel="shortcut icon" href="favicon.ico" />
<title>Musubi Reader</title>
</head>

<!-- amChart Resources -->
<script type = "text/javascript" src="core.js"></script>
<script type = "text/javascript" src="charts.js"></script>

<!-- Project Script -->
<script type = "text/javascript" src="twitch-visualizer.js"></script>


<!-- Webpage Code -->
<body>

<nav class="topnav">
	<a class="title"><b>Musubi Reader</b></a>
	<a class="title" id="channel_display">Channel: </a>
	<a class="button" href="#settings">Settings</a>
	<a class="button" href="#about">About</a>
</nav>

<br>

<div class='box' id="chartdiv"></div>

<!-- **************************** -->
<!-- * Embedded Twitch Chat Box * -->
<!-- **************************** -->
<div class='box'>
	<iframe style="width: 100%; height: 90%;" frameborder="0" scrolling="yes" id="twitch_chat" src="https://www.twitch.tv/embed/overwatchleague/chat"> </iframe>
</div>

<!-- ********************** -->
<!-- * Emote Chart Script * -->
<!-- ********************** -->
<script type = "text/javascript" src="emote-chart.js"></script>


<!-- ********************
     * About Menu Popup *
     ******************** -->
<div id="about" class="overlay">
	<div class="popup">
		<h2>About</h2>
		<a class="close" href="#">&times;</a>
		<div class="content">
			<p>
				Do you enjoy Twitch chat but cannot read up to 10,000 words per minute? Use this tool to filter out that unreadable waterfall of spam and show only the most important info: the top five emotes everyone is spamming right now.
			</p>
			<p>
				<b>Modes available:</b>
				<br>
				<u>Point Decay <font size="2">[default]</font> </u> - Each emote received adds one point to that emote's score. The score decays over time, with higher values decaying faster.
				<br>
				<u>Sliding Window</u> - Sums up all emotes received in the last 20 seconds. Higher memory requirement. Window length is modifiable in the settings menu.
			</p>
			<p>
				If you have a rant, a rave, or need to report a bug or security vulnerability, please contact me at: <b>mail at brndjsmith dot net</b>
			</p>
			<p><font size="2.5">
				Chart created using the <a href="https://www.amcharts.com/">amCharts</a> library.
			</font></p>
		</div>
	</div>
</div>

<!-- ***********************
     * Settings Menu Popup *
     *********************** -->
<div id="settings" class="overlay">
	<div class="popup">
		<h2>Settings</h2>
		<a class="close" href="#">&times;</a>
		<div class="content">
			<p><u>Display Settings <font size="1.5">[Requires Reload]</font></u></p>
				<form method="GET" action="index.html">
					<table>
						<tr>
							<td>
								<label for="channel">Channel: </label>
							</td> <td>
								<input type="text" id="channel_form" name="channel" value="overwatchleague" />
							</td> <td>
						<tr>
							<td>
								<label for="mode">Mode: </label>
							</td> <td>
							<select id="mode_dropdown" name="mode">
									<option value="decay">Point Decay</option>
									<option value="window">Sliding Window</option>
								</select>
							</td> <td rowspan="2">
								<input style="margin:5px;" type="submit" value="Switch"/>
							</td>
						</tr>
					</table>
				</form>

			<p><u>Collection Settings</u></p>
			<table>		
				<tr>
					<td>
						<label for="refresh_rate">Refresh Rate (ms): </label>
					</td> <td>
						<input type="text" id="refresh_rate" value="1000">
					</td>
				</tr>
								<tr>
					<td>
						<label id="window_label" for="window_range">Window Length (ms): </label>
					</td> <td>
						<input type="text" id="window_range" value="20000">
					</td> <td rowspan="2">
						<button onclick="changeRefreshInterval()">Update</button>
					</td>
				</tr>
			</table>
		</div>
	</div>
</div>


</body>

</html>